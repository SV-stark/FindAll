import { Palette } from "../globals.slint";
import { Icon } from "Icon.slint";

export component ResultRow inherits Rectangle {
    in property <string> title;
    in property <string> path;
    in property <float> score;
    in property <string> icon: "file";
    in property <string> snippet;
    in property <bool> selected: false;
    in property <bool> alternate: false; // For zebra striping if desired
    
    callback clicked <=> touch.clicked;
    callback double-clicked <=> touch.double-clicked;
    height: root.snippet != "" ? 48px : 32px;
    background: root.selected ? Palette.current.accent_color.with-alpha(0.2) : (touch.has-hover ? Palette.current.surface_color.darker(5%) : (root.alternate ? Palette.current.surface_color.darker(2%) : transparent));
    touch := TouchArea { }

    VerticalLayout {
        alignment: center;
        padding-left: 8px;
        padding-right: 8px;
        spacing: 2px;
        
        // Top Row
        HorizontalLayout {
            spacing: 12px;
            alignment: start;

            // Icon
            Icon {
                icon_name: root.icon;
                size: 16px;
                icon_color: root.selected ? Palette.current.text_primary : Palette.current.accent_color;
                y: (parent.height - self.height) / 2;
            }

            // Filename (Primary)
            Text {
                text: root.title;
                color: Palette.current.text_primary;
                font-size: 13px;
                font-weight: 500;
                vertical-alignment: center;
                overflow: elide;
                width: 30%;
            }

            // Path (Secondary)
            Text {
                text: root.path;
                color: Palette.current.text_secondary;
                font-size: 12px;
                vertical-alignment: center;
                overflow: elide;
                horizontal-stretch: 1;
            }

            // Score (Right aligned)
            Text {
                text: Math.round(root.score * 10.0) / 10.0;
                color: Palette.current.accent_color;
                font-size: 11px;
                vertical-alignment: center;
                width: 40px;
                horizontal-alignment: right;
            }
        }
        
        // Snippet Row
        if root.snippet != "": Text {
            text: root.snippet;
            color: Palette.current.text_secondary;
            font-size: 11px;
            overflow: elide;
        }
    }
    
    // Bottom border separator
    Rectangle {
        y: parent.height - 1px;
        height: 1px;
        background: Palette.current.border_color.with-alpha(0.3);
    }
}
